# {{ ansible_managed }}
{% import 'nginx_macros.j2' as nginx_macros with context %}
user {{ nginx_user|default('www-data') }};
worker_processes {{ nginx_worker_processes|default(4) }};
pid /run/nginx.pid;

events {
{% set _dummy = nginx_event_default_params.update(nginx_event_params) %}
{% set event_params = nginx_event_default_params %}
{{ nginx_macros.paramsList(event_params) }}
}

http {
{% set _dummy = nginx_http_default_params.update(nginx_http_params) %}
{% set http_params = nginx_http_default_params %}
{{ nginx_macros.paramsList(http_params) }}

	# do not show the nginx version
	server_tokens   off;

	include /etc/nginx/mime.types;
	default_type application/octet-stream;

	##
	# Virtual Host Configs
	##

	include /etc/nginx/conf.d/*.conf;
	include /etc/nginx/sites-enabled/*;
}

#mail {
#	# See sample authentication script at:
#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript
#
#	# auth_http localhost/auth.php;
#	# pop3_capabilities "TOP" "USER";
#	# imap_capabilities "IMAP4rev1" "UIDPLUS";
#
#	server {
#		listen     localhost:110;
#		protocol   pop3;
#		proxy      on;
#	}
#
#	server {
#		listen     localhost:143;
#		protocol   imap;
#		proxy      on;
#	}
#}
